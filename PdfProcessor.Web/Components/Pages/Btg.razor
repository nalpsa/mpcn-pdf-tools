@page "/btg-pactual"
@page "/btg"

<PageTitle>BTG Pactual - Transactions - PDF Processor</PageTitle>

<div class="page-container">
  <div class="page-header">
    <div class="header-icon">üè¶</div>
    <div>
      <h1>BTG Pactual - Transactions</h1>
      <p class="subtitle">Extra√ß√£o autom√°tica de transa√ß√µes do BTG Pactual</p>
    </div>
  </div>

  <div class="content-card">
    <div class="info-box info">
      <div class="info-icon">‚ÑπÔ∏è</div>
      <div>
        <strong>Como funciona:</strong>
        <ul>
          <li>Selecione um ou m√∫ltiplos PDFs de extrato BTG Pactual</li>
          <li>O sistema identifica automaticamente a tabela "Transactions in Date Sequence"</li>
          <li>Extrai todas as colunas: Data, Activity Type, Description, Quantity, Price, Amount, etc</li>
          <li>Gera um arquivo Excel consolidado com todas as transa√ß√µes</li>
        </ul>
      </div>
    </div>

    <div class="info-box warning">
      <div class="info-icon">‚ö†Ô∏è</div>
      <div>
        <strong>Estrutura do PDF:</strong>
        <ul style="margin: 0.5rem 0 0 0;">
          <li>In√≠cio da tabela: <code>"Transactions in Date Sequence"</code></li>
          <li>Continua√ß√£o: <code>"Transactions in Date Sequence (continued)"</code></li>
          <li>Fim da tabela: <code>"Total Value of Transactions"</code></li>
          <li>Rodap√© ignorado ap√≥s: <code>"Page N of N"</code></li>
        </ul>
      </div>
    </div>

    <div class="upload-section">
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">üìÅ</div>
        <div class="upload-text">Clique aqui ou arraste os PDFs</div>
        <div class="upload-hint">Selecione m√∫ltiplos PDFs do BTG Pactual (m√°x. 16MB cada)</div>
      </div>
      <input type="file" id="fileInput" class="hidden-file-input" multiple accept=".pdf" />
    </div>

    <!-- Lista de arquivos selecionados -->
    <div id="filesSelected" class="files-selected" style="display: none;">
      <div class="files-header">üìã Arquivos Selecionados:</div>
      <div id="filesList" class="files-list"></div>
      <div id="filesSummary" class="files-summary"></div>
    </div>

    <!-- Bot√µes de a√ß√£o -->
    <div id="actionButtons" class="action-section" style="display: none;">
      <button class="btn btn-primary" id="processBtn" onclick="processFiles()" disabled>
        üè¶ Processar e Gerar Excel
      </button>
      <button class="btn btn-secondary" onclick="clearFiles()">
        üóëÔ∏è Limpar
      </button>
    </div>

    <!-- Loading -->
    <div id="loadingIndicator" class="loading" style="display: none;">
      <div class="spinner"></div>
      <p id="loadingText">Processando extratos do BTG Pactual...</p>
    </div>

    <!-- Mensagem de status -->
    <div id="statusMessage" class="alert" style="display: none;"></div>
  </div>

  <div class="feature-boxes">
    <div class="feature-box">
      <div class="feature-icon">üìä</div>
      <h4>Extra√ß√£o Completa</h4>
      <p>Todas as 9 colunas da tabela de transa√ß√µes</p>
    </div>
    <div class="feature-box">
      <div class="feature-icon">üîÑ</div>
      <h4>Multi-p√°gina</h4>
      <p>Processa tabelas que continuam em v√°rias p√°ginas</p>
    </div>
    <div class="feature-box">
      <div class="feature-icon">‚ö°</div>
      <h4>Batch Processing</h4>
      <p>M√∫ltiplos PDFs em um √∫nico Excel</p>
    </div>
  </div>
</div>

<!-- style -->
<link rel="stylesheet" href="/css/pdf-upload-shared.css" />
<link rel="stylesheet" href="css/btg.css" />

<!-- 1. Carregar depend√™ncias compartilhadas PRIMEIRO -->
<script src="/js/api-config.js"></script>
<script src="/js/pdf-upload-handler.js"></script>

<!-- 2. Carregar script espec√≠fico do banco DEPOIS -->
<script src="/js/btg.js"></script>