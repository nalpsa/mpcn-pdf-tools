@page "/compress-pdf"
@page "/comprimir"

<PageTitle>Comprimir PDF - PDF Processor</PageTitle>

<div class="page-container">
  <div class="page-header">
    <div class="header-icon">ğŸ—œï¸</div>
    <div>
      <h1>Comprimir PDF</h1>
      <p class="subtitle">Reduza o tamanho de arquivos PDF mantendo a qualidade</p>
    </div>
  </div>

  <div class="content-card">
    <div class="info-box info">
      <div class="info-icon">â„¹ï¸</div>
      <div>
        <strong>Como funciona:</strong>
        <ul>
          <li>Selecione um ou mÃºltiplos arquivos PDF</li>
          <li>Escolha o nÃ­vel de compressÃ£o para cada arquivo</li>
          <li>Opcionalmente, remova imagens para maior compressÃ£o</li>
          <li>Baixe os arquivos comprimidos individualmente ou em ZIP</li>
        </ul>
      </div>
    </div>

    <div class="upload-section">
      <!-- âœ… CORRETO: Sem onclick inline - gerenciado pelo pdf-upload-handler.js -->
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">ğŸ“</div>
        <div class="upload-text">Clique aqui ou arraste os PDFs</div>
        <div class="upload-hint">Selecione mÃºltiplos PDFs para comprimir (mÃ¡x. 16MB cada)</div>
      </div>
      <input type="file" id="fileInput" class="hidden-file-input" multiple accept=".pdf" />
    </div>

    <!-- Contador de arquivos -->
    <div id="fileCounter" class="file-counter" style="display: none;">
      <span class="counter-icon">ğŸ“‹</span>
      <span id="counterText">Arquivos Carregados: 0</span>
    </div>

    <!-- Grid de arquivos -->
    <div id="filesGrid" class="files-grid"></div>

    <!-- BotÃµes de aÃ§Ã£o -->
    <div id="actionButtons" class="action-section" style="display: none;">
      <div class="batch-compression-buttons">
        <button class="btn btn-batch btn-low" onclick="applyCompressionToAll('Low')">
          ğŸŸ¢ Todos: Baixa
        </button>
        <button class="btn btn-batch btn-medium" onclick="applyCompressionToAll('Medium')">
          ğŸŸ¡ Todos: MÃ©dia
        </button>
        <button class="btn btn-batch btn-high" onclick="applyCompressionToAll('High')">
          ğŸ”´ Todos: Alta
        </button>
      </div>
      
      <div class="main-action-buttons">
        <button class="btn btn-primary" onclick="compressAllFiles()">
          ğŸ—œï¸ Comprimir PDFs
        </button>
        <button class="btn btn-secondary" onclick="clearAllFiles()">
          ğŸ—‘ï¸ Limpar
        </button>
      </div>
    </div>

    <!-- Loading -->
    <div id="loadingIndicator" class="loading" style="display: none;">
      <div class="spinner"></div>
      <p id="loadingText">Processando...</p>
    </div>

    <!-- Mensagem de status -->
    <div id="statusMessage" class="alert" style="display: none;"></div>
  </div>

  <div class="feature-boxes">
    <div class="feature-box">
      <div class="feature-icon">âš™ï¸</div>
      <h4>3 NÃ­veis</h4>
      <p>Escolha o nÃ­vel ideal de compressÃ£o</p>
    </div>
    <div class="feature-box">
      <div class="feature-icon">ğŸ–¼ï¸</div>
      <h4>OtimizaÃ§Ã£o de Imagens</h4>
      <p>CompressÃ£o inteligente de imagens</p>
    </div>
    <div class="feature-box">
      <div class="feature-icon">ğŸ“Š</div>
      <h4>EstatÃ­sticas</h4>
      <p>Veja quanto espaÃ§o economizou</p>
    </div>
  </div>
</div>

<!-- ========================================
     CSS - Ordem crÃ­tica: Shared primeiro
     ======================================== -->
<link rel="stylesheet" href="/css/pdf-upload-shared.css" />
<link rel="stylesheet" href="/css/compress-pdf.css" />

<!-- ========================================
     JavaScript - Ordem crÃ­tica
     ======================================== -->
<!-- 1. ConfiguraÃ§Ã£o da API -->
<script src="/js/api-config.js"></script>

<!-- 2. Sistema de upload compartilhado -->
<script src="/js/pdf-upload-handler.js"></script>

<!-- 3. LÃ³gica especÃ­fica do Compress PDF -->
<script src="/js/compress-pdf.js"></script>
