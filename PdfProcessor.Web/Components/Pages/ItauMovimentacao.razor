@page "/itau-movimentacao"
@page "/itau-mov"

<PageTitle>ItaÃº - MovimentaÃ§Ã£o BancÃ¡ria - PDF Processor</PageTitle>

<div class="page-container">
  <div class="page-header">
    <div class="header-icon">ğŸ’³</div>
    <div>
      <h1>ItaÃº - MovimentaÃ§Ã£o BancÃ¡ria</h1>
      <p class="subtitle">ExtraÃ§Ã£o completa de movimentaÃ§Ã£o bancÃ¡ria</p>
    </div>
  </div>

  <div class="content-card">
    <div class="info-box info">
      <div class="info-icon">ğŸ“Š</div>
      <div>
        <strong>ExtraÃ§Ã£o de MovimentaÃ§Ã£o BancÃ¡ria:</strong>
        <p style="margin: 0.5rem 0 0 0; color: #666;">
          O sistema identifica automaticamente <strong>mÃºltiplas contas</strong> pelos cÃ³digos de agÃªncia e conta
          corrente,
          criando uma <strong>aba separada</strong> para cada conta no arquivo Excel final.
        </p>
      </div>
    </div>

    <!-- BotÃ£o Vide Layout -->
    <div class="layout-button-section">
      <button id="btnViewLayout" class="btn-view-layout">
        <span class="layout-icon">ğŸ–¼ï¸</span>
        Veja o Layout do PDF
      </button>
    </div>

    <!-- Modal do Layout -->
    <div id="layoutModal" class="modal-layout">
      <div class="modal-content-layout">
        <div class="modal-header-layout">
          <h3>ğŸ“„ Layout do PDF - MovimentaÃ§Ã£o Itau</h3>
          <button id="btnCloseModal" class="btn-close-modal">&times;</button>
        </div>
        <div class="modal-body-layout">
          <img src="/img/layout_itau-movimentacao.png" alt="Layout MovimentaÃ§Ã£o Itau" class="layout-image" />
        </div>
      </div>
    </div>

    <div class="features-list">
      <div class="feature-item">
        <span class="feature-icon">ğŸ”</span>
        <span>Identifica a seÃ§Ã£o "Conta Corrente | MovimentaÃ§Ã£o"</span>
      </div>
      <div class="feature-item">
        <span class="feature-icon">ğŸ¦</span>
        <span>Detecta agÃªncia e conta automaticamente</span>
      </div>
      <div class="feature-item">
        <span class="feature-icon">ğŸ“‹</span>
        <span>Extrai todas as movimentaÃ§Ãµes da tabela</span>
      </div>
      <div class="feature-item">
        <span class="feature-icon">ğŸ“…</span>
        <span>Corrige datas em branco automaticamente</span>
      </div>
      <div class="feature-item">
        <span class="feature-icon">ğŸ’°</span>
        <span>Classifica valores em entrada, saÃ­da e saldo</span>
      </div>
    </div>

    <div class="info-box info">
      <div class="info-icon">âš ï¸</div>
      <div>
        <strong>Pontos importantes para ajustar no XLSX:</strong>
        <p style="margin: 0.5rem 0 0 0; color: #666;">
          A Primeira e Ãºltima linha de cada mÃªs deve ser <strong>EXCLUÃDA</strong> Pois estas linhas nÃ£o fazem parte da
          movimentaÃ§Ã£o.
          A primeira linha tem na descriÃ§Ã£o algo como <strong>"pela Bolsa de Valores"</strong>, e a Ãºltima tem a
          descriÃ§Ã£o, algo como <strong>"Saldo em C/C"</strong>.
        </p>
      </div>
    </div>

    <div class="upload-section">
      <!-- âœ… CORRETO: Sem onclick inline - gerenciado pelo pdf-upload-handler.js -->
      <div class="upload-area" id="uploadArea">
        <div class="upload-icon">ğŸ“„</div>
        <div class="upload-text">Clique aqui ou arraste os PDFs</div>
        <div class="upload-hint">Selecione mÃºltiplos PDFs de extrato ItaÃº (mÃ¡x. 16MB cada)</div>
      </div>
      <input type="file" id="fileInput" class="hidden-file-input" multiple accept=".pdf" />
    </div>

    <!-- Lista de arquivos selecionados -->
    <div id="filesSelected" class="files-selected" style="display: none;">
      <div class="files-header">ğŸ“‹ Arquivos Selecionados:</div>
      <div id="filesList" class="files-list"></div>
      <div id="filesSummary" class="files-summary"></div>
    </div>

    <!-- BotÃ£o de processamento -->
    <div id="actionButtons" class="action-section" style="display: none;">
      <button class="btn btn-primary" id="processBtn" onclick="processFiles()" disabled>
        Processar PDFs e Gerar Consolidado
      </button>
    </div>

    <!-- Loading -->
    <div id="loadingIndicator" class="loading" style="display: none;">
      <div class="spinner"></div>
      <p id="loadingText">Processando extratos do ItaÃº... Aguarde por favor.</p>
      <div id="progressInfo" class="progress-info"></div>
    </div>

    <!-- Mensagem de status -->
    <div id="statusMessage" class="alert" style="display: none;"></div>
  </div>

  <div class="feature-boxes">
    <div class="feature-box">
      <div class="feature-icon">ğŸ“Š</div>
      <h4>MÃºltiplas Contas</h4>
      <p>Processa vÃ¡rias contas em um Ãºnico Excel</p>
    </div>
    <div class="feature-box">
      <div class="feature-icon">ğŸ”„</div>
      <h4>CorreÃ§Ã£o AutomÃ¡tica</h4>
      <p>Corrige datas e valores automaticamente</p>
    </div>
    <div class="feature-box">
      <div class="feature-icon">âš¡</div>
      <h4>Batch Processing</h4>
      <p>Processa mÃºltiplos PDFs de uma vez</p>
    </div>
  </div>
</div>

<!-- ========================================
     CSS - Ordem crÃ­tica: Shared primeiro
     ======================================== -->
<link rel="stylesheet" href="/css/pdf-upload-shared.css" />
<link rel="stylesheet" href="/css/itau-movimentacao.css" />

<!-- ========================================
     JavaScript - Ordem crÃ­tica
     ======================================== -->
<!-- 1. ConfiguraÃ§Ã£o da API -->
<script src="/js/api-config.js"></script>

<!-- 2. Sistema de upload compartilhado -->
<script src="/js/pdf-upload-handler.js"></script>

<!-- 3. LÃ³gica especÃ­fica do ItaÃº MovimentaÃ§Ã£o -->
<script src="/js/itau-movimentacao.js"></script>